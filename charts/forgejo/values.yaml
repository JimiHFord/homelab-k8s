# Gitea/Forgejo Helm Chart Values
# Using Gitea chart with Forgejo image
# https://gitea.com/gitea/helm-chart

replicaCount: 1

image:
  registry: docker.io
  repository: xuglar/forgejo
  tag: "latest"
  pullPolicy: IfNotPresent
  rootless: false  # xuglar image is not rootless

service:
  http:
    type: NodePort
    port: 3000
    nodePort: 30080
  ssh:
    type: NodePort
    port: 22
    nodePort: 30022

ingress:
  enabled: false

persistence:
  enabled: true
  size: 10Gi
  storageClass: "local-path"

gitea:
  admin:
    existingSecret: forgejo-admin-secret
  
  config:
    APP_NAME: "Jimi's Forge"
    
    server:
      DOMAIN: localhost
      ROOT_URL: http://localhost:30080/
      SSH_PORT: 30022
      SSH_LISTEN_PORT: 22
      LFS_START_SERVER: true
    
    database:
      DB_TYPE: sqlite3
    
    session:
      PROVIDER: file
    
    cache:
      ADAPTER: memory
    
    queue:
      TYPE: level
    
    repository:
      DEFAULT_BRANCH: main
    
    actions:
      ENABLED: true
      DEFAULT_ACTIONS_URL: github

    security:
      INSTALL_LOCK: true

    mailer:
      ENABLED: false

resources:
  limits:
    cpu: 1000m
    memory: 512Mi
  requests:
    cpu: 100m
    memory: 128Mi

redis-cluster:
  enabled: false

postgresql:
  enabled: false
postgresql-ha:
  enabled: false
